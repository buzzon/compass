<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
    <title>Compass</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../../static/styles/style.css" th:href="@{/static/styles/style.css}"/>
    <link rel="stylesheet" href="../static/styles/style.css" th:href="@{/styles/style.css}"/>
</head>
<body>
<h1>Tools</h1>
<p>Click <a th:href="@{/}">here</a> to see a main page.</p>
<div class="content">
    <h2>Add template</h2>
    <div class="new_template">
        <form th:action="@{/carrier/tools}" method="post" th:object="${Template}">
            <div><label> count tickets : <input type="number" th:field="*{countTickets}"/></label></div>
            <div><label> price : <input type="number" step="0.01" th:field="*{price}"/></label></div>

            <h2>Direction:</h2>
            <div><input type="submit" value="Add Stop" name="addStop"/></div>
            <div><label> Choice transport:
                <select th:field="*{transport.id}">
                    <option th:each="transport : ${Transports}"
                            th:value="${transport.id}"
                            th:text="${transport.title}"></option>
                </select>
            </label></div>
            <div><input type="submit" value="Add Template" name="addTemplate"/></div>
        </form>
    </div>

    <div th:if="${User.getCarrier().templates} != null">
        <h2>Templates:</h2>
        <div th:each="template : ${User.getCarrier().templates}" class="rides">
            <div th:text="'id: ' + ${template.id}"></div>
            <div>stops:</div>
            <div th:each="stop : ${template.stops}">
                <div th:text="'--> ' + ${stop.title}"></div>
            </div>
            <div th:switch="${template.transport}">
                <div th:case="*" th:text="'transport: ' + *{template.transport.title}"></div>
                <div th:case="null" th:text="'transport: Transport is not specified'"></div>
            </div>
            <div th:text="'seats: ' + *{template.countTickets}"></div>
            <div th:text="'price: ' + *{template.price}"></div>
            <div th:if="${template.getRides() != null}">
                <h3>Rides:</h3>
                <div th:each="ride : ${template.getRides()}" class="ride">
                    <div th:text="'id: ' + ${ride.id}"></div>
                    <div th:text="'isValid: ' + ${ride.valid}"></div>
                    <div th:text="'discounts: ' + ${ride.discounts}"></div>
                    <div th:text="'departureDate: ' + ${ride.departureDate}"></div>
                    <div th:text="'returnDate: ' + ${ride.returnDate}"></div>
                    <div th:text="'views: ' + ${ride.views}"></div>
                    <div th:text="'free seats count: ' + ${ride.freeSeats.size()} + '/' + ${template.countTickets}"></div>
                    <div th:text="'free seats: ' + ${ride.freeSeats}"></div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>